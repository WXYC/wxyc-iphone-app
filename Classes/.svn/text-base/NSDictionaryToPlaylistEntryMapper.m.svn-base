//
//  NSDictionaryToPlaylistEntryMapper.m
//  WXYCapp
//
//  Created by Jake on 10/27/10.
//  Copyright 2010 WXYC. All rights reserved.
//

#import "NSDictionaryToPlaylistEntryMapper.h"
#import "PlaylistEntry.h"
#import "Playcut.h"
#import "Talkset.h"
#import "Breakpoint.h"
#import "WXYCDataStack.h"

@implementation NSDictionaryToPlaylistEntryMapper

+(PlaylistEntry*)convertDict:(NSDictionary*)dictionary {
	NSString *entryType = [NSString stringWithFormat: @"%@", [dictionary objectForKey:@"entryType"]];
	
	if ([entryType isEqualToString:@"playcut"] )
	{
		Playcut *entry = (Playcut*)[NSEntityDescription insertNewObjectForEntityForName:@"Playcut" inManagedObjectContext:[[WXYCDataStack sharedInstance] managedObjectContext]];//[[Playcut alloc] init];

		//NSLog(@"%@",dictionary);
		
		[entry setArtist:[[dictionary objectForKey:@"playcut"] objectForKey:@"artistName"]];
		[entry setSong:[[dictionary objectForKey:@"playcut"] objectForKey:@"songTitle"]];
		[entry setAlbum:[[dictionary objectForKey:@"playcut"] objectForKey:@"releaseTitle"]];
		[entry setLabel:[[dictionary objectForKey:@"playcut"] objectForKey:@"labelName"]];
		[entry setChronOrderID:[dictionary objectForKey:@"chronOrderID"]];
		[entry setId:[dictionary objectForKey:@"id"]];
		[entry setFavorite:NO];
		if (entry.Favorite == nil) {
			NSLog(@"MAPPED ENTRY favorite nil");
		}
		NSLog(@"MAPPED ENTRY favorite %i", entry.Favorite);
		return entry;
	}
	else if ([entryType isEqualToString:@"talkset"] ) {
		return [[Talkset alloc] init];
	}
	else if ([entryType isEqualToString:@"breakpoint"] ) {
		return [[Breakpoint alloc] init];
	}
	
	return nil;
}

@end
